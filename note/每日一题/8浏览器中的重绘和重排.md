# 浏览器中的重绘和重排
## 页面生成过程
- 第一步：Html被html解析器解析成DOM树
- 第二步：css 被css解析器解析成CSSOM树
- 第三步：结合DOM树和CSSOM树生成渲染树，这一过程被称为attachment
- 第四步：生成布局，在页面绘制出渲染树的节点
- 第五步：将布局绘制在屏幕上，显示出页面

**第四步和第五步**称之为渲染

## 渲染

### 重绘
简单描述：某些元素的外观被改变，元素填充颜色

一个元素的外观发生变化，但是没有影响到布局，重新把元素的外观绘制出来，就称为重绘。
#### 因素
- color
- background
- ... 都是一些改变元素样式的一些属性。不改变其布局

### 重排

简单描述：重新生成布局，重新排列元素。

当dom变化，引起了元素的几何信息，浏览器会重新计算元素的几何信息，将其安排在正确的位置，这一过程称为重排。
重排也称之为回流

#### 会引起重排的因素
- 页面初次渲染
- 添加/删除dom元素
- 改变元素位置
- 改变元素的尺寸
- 改变元素的内容
- 改变字体大小
- 改变浏览器窗口大小
- 激活css伪元素 :hover

#### 重排影响范围
- 全局范围 （从根节点html进行重新渲染）
- 局部范围  (从dom树某个节点进行渲染)

#### 重排优化
- 减少重排范围
    - 尽量不使用table布局 （ 解决：table-layout: auto） 使其一行行渲染。
- 减少重排次数
    - 样式集中改变
    - 时dom脱离文档流
    - 优化动画

*重绘不一定重排，但重排一定导致重绘*


### 总结

渲染的三个阶段
- Layout  (重排、回流)
- Paint     （重绘）
    - 重排和重绘是发生在GPU上
- Composite Layers （CPU把生成的位图BitMap— 传输到GPU，渲染到屏幕）

* Css3 是发生在GPU上的

[参考地址](https://juejin.cn/post/6844904083212468238#heading-18)