# 漏洞排查

## 如何排查一个接口是否有漏洞

1. 判断参数
   1. 看这个接口是否有请求参数，这个参数的含义，如果是请求参数包含，id, 可查看是否有越权风险等
   2. 是否可以通过参数控制跳转目标的URL

2. 看接口类型（是否是上传）
    如果是上传接口的话，排查是否有上传漏洞
    1. 是否限制了文件上传的格式
    2. 是否上传的是svg 是否做好上传白名单
    3. 后端是否做好文件格式限制，正确判断了文件头
    4. 文件存放位置是否合适
    5. 文件存储的文件名是否做好了修改，禁止使用客户的文件原名

3. 接口是否读取了web服务器上的文件
   1. 如果是读取了web服务器的文件的话，看是否有敏感文件被泄漏
   2. 文件的读取方式是否有问题，检查读取的路径，设置读取的权限等

4. 检查接口是否有DB操作
   1. 检查是否存在sql 注入
   2. 禁止相信外来的一些参数，都要做合理的校验

5. 是否有个人资源的操作/如获取/删除某个人的文章
   1. 是否存在越权操作、删除的是否是通过了权限校验

6. 如果CSRF控制执行后，敏感性大不大？
   1. 如果接口被CSRF了，是否有敏感数据泄漏。
   2. 是否采用了token、或者双重cookie等
7. 判断接口是否有薅羊毛的可能（抽奖、领礼包）
8. 是否有完成任务领福利的逻辑 （如阅读文章领积分）
9. 接口返回信息是否敏感（手机号、身份证信息是否做好相应的打码）
10. 是否会触发发短信的操作
    1.  如果是的话，是否做了验证拦截、请求频率等
11. 是否有敏感文件被下载
    1.  配置文件的泄漏
12. 是否会将异常的SQL异常栈信息返回给前端
13. 对于注册登录的接口是否做了密码强度的校验，防止简单被爆破
14. 排查接口是否废弃